<!doctype html>
  <html>

    <head>
      <meta charset="utf-8" />
      <title>Demo Site</title>
    </head>

    <body>
      <h1> Welcome to demo site </h1>
      <p> User name from API: <strong>{{username}}</strong> you live here :
        <br>USERAPI --- {{userApi.id}} {{userApi.address.street}}
        {{#each userlist}}
          <!-- LOOP_START -->
          <div class="loop-item">
            {{this.id}}
<button id="{{this.id}}" data-ab-api="delapi" data-ab-method="DELETE" style="padding:8px 12px;background:#ef4444;color:#fff;border:0;border-radius:6px">Delete delapi</button><script>(function(){var b=document.getElementById("{{this.id}}"); if(!b) return;function notify(t,m){ try{ if(window.parent && window.parent.AppUtils && window.parent.AppUtils.Notify){ if(t==="success") return window.parent.AppUtils.Notify.success(m); if(t==="error") return window.parent.AppUtils.Notify.error(m); return window.parent.AppUtils.Notify.info(m);} }catch(e){} try{ if(window.parent && window.parent.showMessage) return window.parent.showMessage(m); }catch(e){} alert(m); }b.addEventListener("click", function(){ if(!confirm("Are you sure?")) return; try{var generatedApiName = "delapi";var configuredUrl = "https://jsonplaceholder.typicode.com/posts/{{this.id}}";var configuredMethod = "DELETE" || "DELETE";var configuredHeaders = null;var providedBody = null;var parts = window.location.pathname.split("/"); var site = parts.length>2?parts[2]:"";var targetUrl = null; var method = (configuredMethod||"DELETE");if(configuredUrl){ targetUrl = configuredUrl; } else {  try{ if(window && window.selectedSite && Array.isArray(window.selectedSite.apis)){ var def = window.selectedSite.apis.find(function(a){ return a.name === generatedApiName; }); if(def && def.url) targetUrl = def.url; } }catch(e){}  if(!targetUrl) { targetUrl = "/api/sites/" + site + "/endpoints/" + encodeURIComponent(generatedApiName) + "/execute"; method = "POST"; }}var headers = {}; if(configuredHeaders && typeof configuredHeaders === "object"){ try{ for(var _hk in configuredHeaders){ if(Object.prototype.hasOwnProperty.call(configuredHeaders,_hk)) headers[_hk] = configuredHeaders[_hk]; } }catch(e){} }var bodyToSend = null; var hasBody = (typeof providedBody !== "undefined" && providedBody !== null);if(hasBody){ try{ if(!headers["Content-Type"]) headers["Content-Type"] = (typeof providedBody === "object")?"application/json;charset=UTF-8":"text/plain;charset=UTF-8"; }catch(e){} }if(hasBody){ try{ if(typeof providedBody === "object") bodyToSend = JSON.stringify(providedBody); else bodyToSend = String(providedBody); }catch(e){ bodyToSend = String(providedBody); } }var opts = { method: method, headers: headers, credentials: "same-origin" }; if(bodyToSend && method !== "GET" && method !== "HEAD") opts.body = bodyToSend;fetch(targetUrl, opts).then(function(resp){ console.log(resp); if(resp.ok){ try{ var ct = (resp.headers && resp.headers.get)?(resp.headers.get("content-type")||""):""; if(ct.indexOf("application/json")!==-1){ resp.json().then(function(d){ notify("success","Deleted"); try{ location.reload(); }catch(e){} }); } else { resp.text().then(function(t){ notify("success","Deleted"); try{ location.reload(); }catch(e){} }); } }catch(e){ notify("success","Deleted"); try{ location.reload(); }catch(e){} } } else { resp.text().then(function(txt){ notify("error","Delete failed: HTTP "+resp.status+" "+resp.statusText+" â€” "+txt); }).catch(function(){ notify("error","Delete failed: HTTP "+resp.status+" "+resp.statusText); }); } }).catch(function(err){ notify("error", err && err.message?err.message:String(err)); });}catch(err){ notify("error", err && err.message?err.message:String(err)); } });})();</script>

            {{this.name}}
            {{this.username}}
            {{this.email}}
            {{this.address}}
            {{this.phone}}
            {{this.website}}
            {{this.company}}
          </div>
          <!-- LOOP_END -->
        {{/each}}
        </pre>
        </div>
      <form id="abform_mi8skfs3_bavw" data-ab-api="submituser" data-ab-method="POST">
        <label>title:
          <input type="text" id="abform_mi8skfs3_bavw_field_title" name="title" data-field="title" placeholder="Hello World1">
        </label>
        <br>
        <label>body:
          <input type="text" id="abform_mi8skfs3_bavw_field_body" name="body" data-field="body" placeholder="This is my test post">
        </label>
        <br>
        <label>userId:
          <input type="number" id="abform_mi8skfs3_bavw_field_userId" name="userId" data-field="userId" placeholder="14">
        </label>
        <br>
        <button type="submit"> Submit </button>
        <button type="reset"> Reset </button>
      </form>
      <script>
// Form submission code for POST submituser
document.querySelector('button[type="submit"]').addEventListener('click', function(e) {
  e.preventDefault();
  
  var formData = {};
  formData.title = document.querySelector('#abform_mi8skfs3_bavw_field_title').value;
  formData.body = document.querySelector('#abform_mi8skfs3_bavw_field_body').value;
  formData.userId = document.querySelector('#abform_mi8skfs3_bavw_field_userId').value;
  
  // Submit to API
  fetch('/api/sites/demo/endpoints/submituser/execute', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(formData)
  })
  .then(response => response.json())
  .then(data => {
    console.log('Success:', data);
    alert('Form submitted successfully!');
  })
  .catch(error => {
    console.error('Error:', error);
    alert('Error submitting form');
  });
});
</script>
    

